{"version":3,"sources":["site/PostPage.js","pages/footer.js","pages/header.js"],"names":["socket","io","transport","PostPage","params","useParams","history","useHistory","getUserReducer","useSelector","state","useState","user","setUser","post","setPost","idLiked","setIdLiked","idUnLiked","setIdUnLiked","postDele","setPostDele","comment","setComment","newComment","setNewComment","delId","setDelId","showCMT","setShowCMT","pages","setPages","current","setCurrent","listPages","setListPages","console","log","User","useEffect","getUserById","_id","then","res","data","on","id","push","alert","getPostById","arrPages","i","checkLike","like","filter","item","includes","length","toPages","name","getCommentByPage","Number","max","class","href","space","title","author","role","src","avatar","alt","userPost","described","imgVideo","split","pop","height","width","renderImg","Date","created","toDateString","toLocaleTimeString","style","marginTop","onClick","emit","deletePost","body","unLikePost","catch","err","likePost","color","value","placeholder","onChange","event","target","type","content","addComment","map","index","deleteComment","deleteCommentBtn","fill","stroke","viewBox","xmlns","stroke-linecap","stroke-linejoin","stroke-width","d","Footer","action","required","cols","rows","React","Component","Header","for","localStorage","clear","window","location","reload"],"mappings":"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","file":"static/js/5.b60a7e92.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router';\r\nimport {\r\n    useParams,\r\n    Link\r\n} from \"react-router-dom\";\r\nimport { addComment, deleteComment, getPostById, getUserById, likePost, unLikePost, updateCommentInPost, getCommentByPage, deletePost } from '../axios';\r\nimport io from 'socket.io-client'\r\nimport Footer from '../pages/footer'\r\nimport Header from '../pages/header'\r\nimport '../css/postPage.css'\r\n\r\nconst socket = io('http://localhost:8797', { transport: ['websocket'] })\r\n\r\nexport default function PostPage() {\r\n\r\n    const params = useParams()\r\n    let history = useHistory()\r\n    const getUserReducer = useSelector(state => state.getUserReducer)\r\n    const [user, setUser] = useState({})\r\n    const [post, setPost] = useState({})\r\n    const [idLiked, setIdLiked] = useState()\r\n    const [idUnLiked, setIdUnLiked] = useState()\r\n    const [postDele, setPostDele] = useState('alo')\r\n    const [comment, setComment] = useState([])\r\n    const [newComment, setNewComment] = useState()\r\n    const [delId, setDelId] = useState()\r\n    const [showCMT, setShowCMT] = useState(false)\r\n    const [pages, setPages] = useState('')\r\n    const [current, setCurrent] = useState('')\r\n    const [listPages, setListPages] = useState([])\r\n    console.log(getUserReducer.User);\r\n    //Effect\r\n    useEffect(() => {\r\n        getUserById(getUserReducer.User._id).then(res => {\r\n            setUser(res.data)\r\n            console.log(res.data);\r\n        })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        setIdUnLiked('')\r\n        setIdLiked('')\r\n        setNewComment('')\r\n        setDelId('')\r\n        console.log('done');\r\n    }, [post])\r\n\r\n    useEffect(() => {\r\n        socket.on('like', (id) => {\r\n            setIdLiked(id)\r\n        })\r\n        socket.on('unLikePost', (id) => {\r\n            setIdUnLiked(id)\r\n        })\r\n        socket.on('addComment', data => {\r\n            setNewComment(data)\r\n        })\r\n        socket.on('delComment', (id) => {\r\n            setDelId(id)\r\n        })\r\n        socket.on('delete', (id) => {\r\n            console.log(id);\r\n            setPostDele(id)\r\n        })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (postDele == params.id) {\r\n            history.push('/main')\r\n            alert('Bai viet da bi xoa')\r\n        }\r\n    }, [postDele])\r\n\r\n    useEffect(() => {\r\n        getPostById(params.id).then(res => {\r\n            if (res.data.data.comment) {\r\n                setPost(res.data.data)\r\n                console.log(res.data.data);\r\n                setPages(res.data.pages)\r\n                setCurrent(res.data.current)\r\n                let arrPages = []\r\n                for (let i = 1; i <= 3 && i <= res.data.pages; i++) {\r\n                    console.log(i);\r\n                    arrPages.push(i)\r\n                }\r\n                setListPages(arrPages)\r\n            }\r\n        })\r\n    }, [idLiked, idUnLiked, newComment, delId])\r\n\r\n    //handle\r\n    const handleChangeComment = (event) => {\r\n        setComment(event.target.value)\r\n    }\r\n\r\n    const deletePostBtn = () => {\r\n        let id = params.id\r\n        console.log(id);\r\n        socket.emit('deletePost', id)\r\n        deletePost(id).then(res => {\r\n            //alert('Xóa bài viết thành công')\r\n            history.push('/main')\r\n        })\r\n        \r\n        //history.push('/main')\r\n    }\r\n\r\n    const addCommentBtn = () => {\r\n        console.log(user._id)\r\n        let body = {\r\n            content: comment,\r\n            author: user._id\r\n        }\r\n        addComment(params.id, body).then(setComment(''))\r\n        socket.emit('addComment', body)\r\n        setShowCMT(false)\r\n    }\r\n\r\n    const checkLike = post?.like?.filter(item => item._id.includes(user._id)).length\r\n    console.log(checkLike);\r\n\r\n    const likeBtn = () => {\r\n        let body = {\r\n            _id: user._id\r\n        }\r\n        likePost(params.id, body).then(() => {\r\n            socket.emit('likePost', body._id)\r\n        }).catch((err) => { if (err) alert(err) })\r\n    }\r\n\r\n    const showComment = () => {\r\n        let a = showCMT ? false : true\r\n        setShowCMT(a)\r\n    }\r\n\r\n    const unlikeBtn = () => {\r\n        let body = {\r\n            _id: user._id\r\n        }\r\n        unLikePost(params.id, body).then(() => {\r\n            socket.emit('unLike', body._id)\r\n        }).catch((err) => { if (err) alert(err) })\r\n    }\r\n\r\n    const deleteCommentBtn = (item) => {\r\n        deleteComment(item._id).then(() => {\r\n            console.log('xoa');\r\n        }).catch((err) => { if (err) alert(err) })\r\n        socket.emit('delComment', item._id)\r\n    }\r\n\r\n\r\n    //render\r\n\r\n    const renderImg = (item) => {\r\n        if(!item.imgVideo) {\r\n            return null\r\n        } else if (item.imgVideo?.split('.').pop() == 'png' || item.imgVideo?.split('.').pop() == 'jpg' || item.imgVideo?.split('.').pop() == 'jpeg'){\r\n            return (\r\n                <img src={'http://localhost:8797/' + item.imgVideo} height=\"200px\" width=\"200px\" />\r\n            )\r\n        }\r\n    }\r\n\r\n    const renderComment = (item, index) => {\r\n        console.log(item);\r\n        return (\r\n            <div class=\"body\">\r\n                <div class=\"authors\">\r\n                    <div class=\"username-comment\"><a href=\"#\">{item.author?.name}</a></div>\r\n                    <div>{item.author.role === 'user' ? \"Member\" : \"Admin\"}</div>\r\n                    <img src={'http://localhost:8797/' + item.author?.avatar} alt=\"user avatar\" />\r\n                    <div>Posts: <u>{item.author?.userPost.length}</u></div>\r\n                    <br />\r\n                    <hr />\r\n                    <br />\r\n                </div>\r\n\r\n                <div class=\"content\">\r\n                    Created {new Date(item.created).toDateString()} at {new Date(item.created).toLocaleTimeString()}\r\n                    <br />\r\n                    <hr/>\r\n                    <div style={{ marginTop: \"10px\" }}>\r\n                    {item.content}\r\n                    </div>\r\n                    <br />\r\n                    <div class=\"like\" style={{ marginTop: \"30px\" }}>\r\n                        {/* <div class=\"like-number\"><i class=\"far fa-thumbs-up\"></i> Likes: <u>100</u></div> */}\r\n                        {getUserReducer.User._id == item.author?._id || getUserReducer.User.role === 'admin' ?\r\n                            (<><button onClick={() => { deleteCommentBtn(item) }}><i class=\"far fa-trash-alt\"></i> Delete</button></>) : null}\r\n                        {/* <button><i class=\"far fa-thumbs-up\"></i>  Like</button> */}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    const renderCommentNull = () => {\r\n        return (\r\n            <div class=\"body\" >          \r\n                Bình luận gì cho tác giả vui đi :))\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const renderPage = (item, index) => {\r\n\r\n        return (\r\n            <div class={current == item ? \"pagination:number isPages\" : \"pagination:number\"} onClick={() => {toPages(item) }}>\r\n                {item}\r\n            </div>)\r\n    }\r\n\r\n    const toPages = (name) => {\r\n        getCommentByPage(params.id, name).then(res => {\r\n            setPost(res.data.data)\r\n            setCurrent(res.data.current)\r\n            if (Number(name) == listPages[2] && Number(name) != res.data.pages) {\r\n                let i = Number(name)\r\n                let max = i + 2\r\n                let arrPages = []\r\n                for (i; i <= max && i <= res.data.pages; i++) {\r\n                    arrPages.push(i)\r\n                }\r\n                setListPages(arrPages)\r\n            }\r\n        })\r\n    }\r\n\r\n    const toPagesF = (name) => {\r\n        getCommentByPage(params.id,name).then(res => {\r\n            setPost(res.data.data)\r\n            setCurrent(res.data.current)\r\n            if (Number(name) == listPages[0] || Number(name) < listPages[0]) {\r\n                let i = listPages[0] - 2\r\n                let max = listPages[0]\r\n                let arrPages = []\r\n                for (i; i <= max && i <= res.data.pages; i++) {\r\n                    arrPages.push(i)\r\n                }\r\n                setListPages(arrPages)\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    return (\r\n        <div class=\"container\">\r\n            <Header />\r\n            <main>\r\n                <div class=\"main-container-post\">\r\n                    <div class=\"space\"></div>\r\n\r\n                    <div class=\"navigate\">\r\n                        <span><a href=\"/main\">TIE - Forums</a> &gt;&gt; <a href={post.space ? '/main/spaces/' + post.space[0]._id :''}>{post.space ? post.space[0].name : \"\"}</a> &gt;&gt; <a href=\"#\">{post?.title}</a></span>\r\n                    </div>\r\n\r\n                    <div class=\"topic-container\">\r\n                        <div class=\"head\">\r\n                            <div class=\"authors\">Tác giả ?</div>\r\n                            <div class=\"content\">Chủ đề: {post?.title}</div>\r\n                        </div>\r\n\r\n                        <div class=\"body\">\r\n                            <div class=\"authors\">\r\n                                <div class=\"username\"><a href=\"#\">{post?.author?.name}</a></div>\r\n                        \r\n                                <div>{post.author?.role == 'user' ? \"Member\" : \"Admin\"}</div>\r\n                                <img src={'http://localhost:8797/' + post?.author?.avatar} alt=\"user avatar\" />\r\n                                <div>Posts: <u>{post?.author?.userPost.length}</u></div>\r\n                               \r\n                                <br />\r\n                                <hr />\r\n                                <br />\r\n                            </div>\r\n\r\n                            <div class=\"content\">\r\n                                {post?.described}\r\n                                <br />\r\n                                <br /><br />\r\n                                {renderImg(post)}\r\n                                <br />\r\n                                <hr />\r\n                                Created {new Date(post.created).toDateString()} at {new Date(post.created).toLocaleTimeString()} By {post.author?.name}\r\n\r\n                                <div class=\"like\" style={{marginTop: \"10px\"}}>\r\n                                    <div class=\"like-number\"><i class=\"far fa-thumbs-up\"></i> Likes: <u>{post?.like?.length}</u></div>\r\n                                    {getUserReducer.User._id == post.author?._id || getUserReducer.User.role === 'admin'?\r\n                                        (<><button onClick={deletePostBtn}><i class=\"far fa-trash-alt\"></i> Delete</button></>) : null}\r\n                                    <button onClick={checkLike ? unlikeBtn : likeBtn} id={checkLike ? \"cl-red\" : \"\"}><i class={checkLike ? \"far fa-thumbs-up cl-red\" : \"far fa-thumbs-up\"}></i>  Like</button>\r\n                                </div>\r\n                                <div class=\"comment\">\r\n                                    <button style={showCMT ? { color: \"red\" } : { color: \"white\" }} onClick={showComment}><i class=\"far fa-comment-alt\"></i> Comment</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n\r\n                    <div class={showCMT ? \"comment-area v-block\" : \"comment-area hide v-non\"} id=\"comment-area\">\r\n                        <textarea  value={comment} name=\"comment\" id=\"\" placeholder=\"Comment ...\" onChange={handleChangeComment}/>\r\n                        <input type=\"submit\" name=\"\" id=\"\" value=\"submit\" onClick={addCommentBtn}/>\r\n                    </div>\r\n\r\n\r\n\r\n                    <div class=\"comments-container\">\r\n                        <div class=\"head\">\r\n                            <div class=\"authors\">Tác giả ?</div>\r\n                            <div class=\"content\">Comment: </div>\r\n                        </div>\r\n\r\n                        {post.comment?.length != 0 ? post.comment?.map(renderComment) : renderCommentNull()}\r\n\r\n                    </div>\r\n\r\n                    <div class={Number(pages) > 0 ? \"pagination:container\" : \"disableOff\"}>\r\n                        <div class={current != 1 && current > 2 ? \"pagination:number arrow\" : \"pagination:number arrow disableOff\"} onClick={() => { toPagesF(Number(current) - 1) }}>\r\n                            <svg width=\"18\" height=\"18\">\r\n                                <use href=\"#left\" />\r\n                            </svg>\r\n                            <span class=\"arrow:text\">First</span>\r\n\r\n                        </div>\r\n                        <div class={current > 2 ? \"pagination:number\" : \"pagination:number disableOff\"}>\r\n                            ...\r\n                        </div>\r\n                        {listPages.map(renderPage)}\r\n                        <div class={current < pages - 2 ? \"pagination:number\" : \"pagination:number disableOff\"}>\r\n                            ...\r\n                        </div>\r\n                        <div class={current != pages && pages > 3 ? \"pagination:number arrow\" : \"pagination:number arrow disableOff\"} onClick={() => { toPages(Number(current) + 1) }} >\r\n                            <span class=\"arrow:text\">Last</span>\r\n                            <svg width=\"18\" height=\"18\">\r\n                                <use href=\"#right\" />\r\n                            </svg>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n\r\n                    <svg class=\"hide\">\r\n                        <symbol id=\"left\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\"></path></symbol>\r\n                        <symbol id=\"right\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path></symbol>\r\n                    </svg>\r\n\r\n\r\n                    <div class=\"comment-area hide\" id=\"reply-area\">\r\n                        <textarea name=\"reply\" id=\"\" placeholder=\"reply ...\" />\r\n                        <input type=\"submit\" name=\"\" id=\"\" value=\"submit\" />\r\n                    </div>\r\n\r\n                </div>\r\n            </main>\r\n            <Footer />\r\n\r\n\r\n\r\n        </div>\r\n\r\n    )\r\n}","import React from 'react';\r\nimport '../css/footer.css'\r\n\r\nclass Footer extends React.Component {\r\n    \r\n    render() {\r\n        return (\r\n            <footer>\r\n                <div class=\"main-content\" id=\"section@\" >\r\n                    <div class=\"left box-home\">\r\n                        <h2>What is TIE?</h2>\r\n                        <div class=\"content\">\r\n                            <p>TIE - Tech It Easy is forum which was created for technicians, tech-lovers and answers for every technical problems, questions in real life. </p>\r\n                            <div class=\"social\">\r\n                                <a href=\"\"><span class=\"fab fa-facebook-f\" ></span></a>\r\n                                <a href=\"\"><span class=\"fab fa-twitter\" ></span></a>\r\n                                <a href=\"\"><span class=\"fab fa-instagram\" ></span></a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"center box-home\">\r\n                        <h2>Address</h2>\r\n                        <div class=\"content\">\r\n                            <div class=\"place\">\r\n                                <span class=\"fas fa-map-marker-alt\"></span>\r\n                                <span class=\"text\">22 Thành Công, Hà Nội, Việt Nam</span>\r\n                            </div>\r\n                            <div class=\"phone\">\r\n                                <span class=\"fas fa-phone-alt\"></span>\r\n                                <span class=\"text\">+84-918802002</span>\r\n                            </div>\r\n                            <div class=\"email\">\r\n                                <span class=\"fas fa-envelope\"></span>\r\n                                <span class=\"text\">techiteasy.mindx@gmail.com</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"right box-home\">\r\n                        <h2>Feedback</h2>\r\n                        <div class=\"content\">\r\n                            <form action=\"#\">\r\n                                <div class=\"email\">\r\n                                    <div class=\"text\">Email *</div>\r\n                                    <input type=\"email\" required />\r\n                                </div>\r\n                                <div class=\"msg\">\r\n                                    <div class=\"text\">Message *</div>\r\n                                    <textarea cols=\"25\" rows=\"2.5\" required></textarea>\r\n                                </div>\r\n                                <div class=\"btn-home\">\r\n                                    <button type=\"submit\">Send</button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"bottom\">\r\n                    <center>\r\n                        <span class=\"credit\">Created By <a href=\"../index.html\">Tech It Easy</a> | </span>\r\n                        <span class=\"far fa-copyright\"></span><span> 2021 All rights reserved.</span>\r\n                    </center>\r\n                </div>\r\n            </footer>\r\n\r\n\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\nimport { useHistory } from 'react-router';\r\n\r\nexport default function Header() {\r\n    let history = useHistory()\r\n    const logoutBtn = () => {\r\n        localStorage.clear();\r\n        window.location.reload()\r\n\r\n    }\r\n    \r\n    return (\r\n        <header>\r\n            <a href=\"/main\"><img src=\"/assets/images/Logo.png\" class=\"logo\" alt=\"Logo\" /></a>\r\n            <div class=\"menu\">\r\n                <input type=\"checkbox\" id=\"check\" />\r\n                <label for=\"check\" class=\"check-btn\">\r\n                    <i class=\"fa fa-bars\"></i>\r\n                </label>\r\n                <ul>\r\n                    <li><a href=\"./admin\">Admin</a></li>\r\n                    <li><a href=\"/userprofile\">Account</a></li>\r\n                    <li><a href=\"#section@\">Feedback</a></li>\r\n                    <li><a onClick={logoutBtn}>Sign Out</a></li>\r\n                </ul>\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n\r\n    \r\n"],"sourceRoot":""}